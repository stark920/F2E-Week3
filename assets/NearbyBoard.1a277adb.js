import{_ as se,b as M,c as D,f as h,d as K,a as ce,s as ft,t as k,h as x,g as v,r as at,j as it,k as rt,w as yt,o as nn,l as Zn,T as qn,m as Kn,n as Ht,p as Jn,q as Me,x as on,y as rn,z as St,A as an,B as Ce,F as wt,u as Qn,e as Le,C as to,D as Te,v as eo}from"./index.824b33fc.js";import{b as Wt,I as no,a as oo,c as ro}from"./api.52fbe900.js";import{u as ln}from"./map.41fd07e2.js";import{u as ao,I as io,a as lo}from"./likes.0934e934.js";const so={},co={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},uo=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),fo=[uo];function po(t,e){return M(),D("svg",co,fo)}var vo=se(so,[["render",po]]);const ho={},mo={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},go=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"},null,-1),bo=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),yo=[go,bo];function wo(t,e){return M(),D("svg",mo,yo)}var xo=se(ho,[["render",wo]]);const _o={class:"mb-2 flex items-center justify-between"},So={class:"text-lg font-bold"},ko={class:"flex-c text-gray-600"},Mo={class:"whitespace-pre"},Co=K({__name:"NearbyCard",props:{index:null,data:null},emits:["displayDetail"],setup(t,{emit:e}){const n=t,o=ln(),i=ce(),{lang:a}=ft(i),u=(d,g)=>{const l=o.userPosition;if(!l)return"";const s=l[0],p=l[1];if(d==s&&g==p)return 0;{const b=Math.PI*d/180,m=Math.PI*s/180,C=g-p,L=Math.PI*C/180;let S=Math.sin(b)*Math.sin(m)+Math.cos(b)*Math.cos(m)*Math.cos(L);return S>1&&(S=1),S=Math.acos(S),S=S*180/Math.PI,S=S*60*1.1515*1609.344,S.toFixed(0)}},f=(d,g)=>{var l;o.changeViewPosition(d,g),o.focusStopIndex=n.index,e("displayDetail",n.data.StationID,n.data.City,n.data.StationName.Zh_tw,(l=n.data.StationName.En)!=null?l:n.data.StationName.Zh_tw)};return(d,g)=>{var l;return M(),D("div",{class:"cursor-pointer rounded-t-lg border-b-[1px] border-gray-300 p-4 pb-2 hover:bg-gray-100",onClick:g[0]||(g[0]=s=>f(t.data.StationPosition.PositionLat,t.data.StationPosition.PositionLon))},[h("div",_o,[h("div",null,[h("div",So,k(x(a)==="zh-TW"?t.data.StationName.Zh_tw:(l=t.data.StationName.En)!=null?l:t.data.StationName.Zh_tw),1),h("small",null,k(x(a)==="zh-TW"?`${t.data.StopsNum} \u500B\u7AD9\u724C`:`${t.data.StopsNum} stops`),1)]),h("div",ko,[v(xo,{class:"m-5 mr-1 h-5"}),h("span",Mo,k(`${u(t.data.StationPosition.PositionLat,t.data.StationPosition.PositionLon)} m`),1)])])])}}}),Lo={},To={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},zo=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"},null,-1),Eo=[zo];function Do(t,e){return M(),D("svg",To,Eo)}var No=se(Lo,[["render",Do]]),P=function(t){try{return!!t()}catch{return!0}},X=!P(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),ze=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function sn(t){var e={exports:{}};return t(e,e.exports),e.exports}var mt=function(t){return t&&t.Math==Math&&t},_=mt(typeof globalThis=="object"&&globalThis)||mt(typeof window=="object"&&window)||mt(typeof self=="object"&&self)||mt(typeof ze=="object"&&ze)||function(){return this}()||Function("return this")(),N=function(t){return typeof t=="object"?t!==null:typeof t=="function"},ne=_.document,Ao=N(ne)&&N(ne.createElement),cn=function(t){return Ao?ne.createElement(t):{}},un=!X&&!P(function(){return Object.defineProperty(cn("div"),"a",{get:function(){return 7}}).a!=7}),Z=function(t){if(!N(t))throw TypeError(String(t)+" is not an object");return t},zt=function(t,e){if(!N(t))return t;var n,o;if(e&&typeof(n=t.toString)=="function"&&!N(o=n.call(t))||typeof(n=t.valueOf)=="function"&&!N(o=n.call(t))||!e&&typeof(n=t.toString)=="function"&&!N(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")},Ee=Object.defineProperty,J={f:X?Ee:function(t,e,n){if(Z(t),e=zt(e,!0),Z(n),un)try{return Ee(t,e,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Io=J.f,oe=Function.prototype,Oo=oe.toString,jo=/^\s*function ([^ (]*)/;function Q(t,e){e===void 0&&(e={});var n=e.insertAt;if(t&&typeof document!="undefined"){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}X&&!("name"in oe)&&Io(oe,"name",{configurable:!0,get:function(){try{return Oo.call(this).match(jo)[1]}catch{return""}}});Q(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{position:relative;display:block}.vel-modal{z-index:9998;position:fixed;top:0;left:0;right:0;bottom:0;margin:0;background:rgba(0,0,0,.5)}.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-width:80vw;max-height:80vh;display:block;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out, -webkit-transform .3s ease-in-out;-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);background-color:rgba(0,0,0,.7)}@media (max-width:750px){.vel-img{max-width:85vw;max-height:95vh}}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);cursor:pointer;opacity:.6;font-size:32px;color:#fff;-webkit-transition:.15s linear;transition:.15s linear;-webkit-tap-highlight-color:transparent;outline:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{top:24px;right:10px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{right:12px;left:auto}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{right:4px;left:auto}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");Q('.vel-loading{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;width:64px;height:64px}.vel-loading .ring:after{content:" ";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border-color:hsla(0,0%,100%,.7) transparent;border-style:solid;border-width:5px;-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');Q(".vel-on-error{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{font-size:80px;color:#aaa}");Q(".vel-img-title{overflow:hidden;position:absolute;left:50%;bottom:60px;-webkit-transform:translate(-50%);transform:translate(-50%);max-width:80%;font-size:12px;line-height:1;text-align:center;text-overflow:ellipsis;color:#ccc;opacity:.8;white-space:nowrap;cursor:default;-webkit-transition:opacity .15s;transition:opacity .15s}.vel-img-title:hover{opacity:1}");Q(".vel-icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}");Q(".vel-toolbar{position:absolute;overflow:hidden;bottom:8px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);opacity:.9;display:-webkit-box;display:-ms-flexbox;display:flex;border-radius:4px;padding:0}.vel-toolbar,.vel-toolbar .toolbar-btn{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#2d2d2d}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;flex-shrink:0;cursor:pointer;padding:6px 10px;font-size:20px;color:#fff;-webkit-tap-highlight-color:transparent;outline:none}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");var Fo=/#|\.prototype\./,pt=function(t,e){var n=Bo[Po(t)];return n==Yo||n!=$o&&(typeof e=="function"?P(e):!!e)},Po=pt.normalize=function(t){return String(t).replace(Fo,".").toLowerCase()},Bo=pt.data={},$o=pt.NATIVE="N",Yo=pt.POLYFILL="P",fn=pt,ue=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},q=X?function(t,e,n){return J.f(t,e,ue(1,n))}:function(t,e,n){return t[e]=n,t},Vo={}.hasOwnProperty,A=function(t,e){return Vo.call(t,e)},fe=function(t,e){try{q(_,t,e)}catch{_[t]=e}return e},R=_["__core-js_shared__"]||fe("__core-js_shared__",{}),Ro=Function.toString;typeof R.inspectSource!="function"&&(R.inspectSource=function(t){return Ro.call(t)});var kt,lt,Mt,dn=R.inspectSource,De=_.WeakMap,Xo=typeof De=="function"&&/native code/.test(dn(De)),pn=sn(function(t){(t.exports=function(e,n){return R[e]||(R[e]=n!==void 0?n:{})})("versions",[]).push({version:"3.9.1",mode:"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})}),Ho=0,Wo=Math.random(),vn=function(t){return"Symbol("+String(t===void 0?"":t)+")_"+(++Ho+Wo).toString(36)},Ne=pn("keys"),hn=function(t){return Ne[t]||(Ne[t]=vn(t))},de={},Go=_.WeakMap;if(Xo){var W=R.state||(R.state=new Go),Uo=W.get,Zo=W.has,qo=W.set;kt=function(t,e){return e.facade=t,qo.call(W,t,e),e},lt=function(t){return Uo.call(W,t)||{}},Mt=function(t){return Zo.call(W,t)}}else{var nt=hn("state");de[nt]=!0,kt=function(t,e){return e.facade=t,q(t,nt,e),e},lt=function(t){return A(t,nt)?t[nt]:{}},Mt=function(t){return A(t,nt)}}var Gt,Ae={set:kt,get:lt,has:Mt,enforce:function(t){return Mt(t)?lt(t):kt(t,{})},getterFor:function(t){return function(e){var n;if(!N(e)||(n=lt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},pe=sn(function(t){var e=Ae.get,n=Ae.enforce,o=String(String).split("String");(t.exports=function(i,a,u,f){var d,g=!!f&&!!f.unsafe,l=!!f&&!!f.enumerable,s=!!f&&!!f.noTargetGet;typeof u=="function"&&(typeof a!="string"||A(u,"name")||q(u,"name",a),(d=n(u)).source||(d.source=o.join(typeof a=="string"?a:""))),i!==_?(g?!s&&i[a]&&(l=!0):delete i[a],l?i[a]=u:q(i,a,u)):l?i[a]=u:fe(a,u)})(Function.prototype,"toString",function(){return typeof this=="function"&&e(this).source||dn(this)})}),Ko={}.toString,F=function(t){return Ko.call(t).slice(8,-1)},Ie=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch{}return function(o,i){return Z(o),function(a){if(!N(a)&&a!==null)throw TypeError("Can't set "+String(a)+" as a prototype")}(i),e?t.call(o,i):o.__proto__=i,o}}():void 0),Jo=function(t,e,n){var o,i;return Ie&&typeof(o=e.constructor)=="function"&&o!==n&&N(i=o.prototype)&&i!==n.prototype&&Ie(t,i),t},Qo="".split,mn=P(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return F(t)=="String"?Qo.call(t,""):Object(t)}:Object,ve=function(t){if(t==null)throw TypeError("Can't call method on "+t);return t},Et=function(t){return mn(ve(t))},tr=Math.ceil,er=Math.floor,gn=function(t){return isNaN(t=+t)?0:(t>0?er:tr)(t)},nr=Math.min,Dt=function(t){return t>0?nr(gn(t),9007199254740991):0},or=Math.max,rr=Math.min,re=function(t,e){var n=gn(t);return n<0?or(n+e,0):rr(n,e)},Oe=function(t){return function(e,n,o){var i,a=Et(e),u=Dt(a.length),f=re(o,u);if(t&&n!=n){for(;u>f;)if((i=a[f++])!=i)return!0}else for(;u>f;f++)if((t||f in a)&&a[f]===n)return t||f||0;return!t&&-1}},ar={includes:Oe(!0),indexOf:Oe(!1)}.indexOf,bn=function(t,e){var n,o=Et(t),i=0,a=[];for(n in o)!A(de,n)&&A(o,n)&&a.push(n);for(;e.length>i;)A(o,n=e[i++])&&(~ar(a,n)||a.push(n));return a},Ct=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ir=Object.keys||function(t){return bn(t,Ct)},lr=X?Object.defineProperties:function(t,e){Z(t);for(var n,o=ir(e),i=o.length,a=0;i>a;)J.f(t,n=o[a++],e[n]);return t},Ut=_,je=function(t){return typeof t=="function"?t:void 0},he=function(t,e){return arguments.length<2?je(Ut[t])||je(_[t]):Ut[t]&&Ut[t][e]||_[t]&&_[t][e]},sr=he("document","documentElement"),yn=hn("IE_PROTO"),Zt=function(){},Fe=function(t){return"<script>"+t+"<\/script>"},xt=function(){try{Gt=document.domain&&new ActiveXObject("htmlfile")}catch{}var t,e;xt=Gt?function(o){o.write(Fe("")),o.close();var i=o.parentWindow.Object;return o=null,i}(Gt):((e=cn("iframe")).style.display="none",sr.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Fe("document.F=Object")),t.close(),t.F);for(var n=Ct.length;n--;)delete xt.prototype[Ct[n]];return xt()};de[yn]=!0;var cr=Object.create||function(t,e){var n;return t!==null?(Zt.prototype=Z(t),n=new Zt,Zt.prototype=null,n[yn]=t):n=xt(),e===void 0?n:lr(n,e)},ur=Ct.concat("length","prototype"),wn={f:Object.getOwnPropertyNames||function(t){return bn(t,ur)}},Pe={}.propertyIsEnumerable,Be=Object.getOwnPropertyDescriptor,fr={f:Be&&!Pe.call({1:2},1)?function(t){var e=Be(this,t);return!!e&&e.enumerable}:Pe},$e=Object.getOwnPropertyDescriptor,me={f:X?$e:function(t,e){if(t=Et(t),e=zt(e,!0),un)try{return $e(t,e)}catch{}if(A(t,e))return ue(!fr.f.call(t,e),t[e])}},Lt=`[	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]`,dr=RegExp("^"+Lt+Lt+"*"),pr=RegExp(Lt+Lt+"*$"),qt=function(t){return function(e){var n=String(ve(e));return 1&t&&(n=n.replace(dr,"")),2&t&&(n=n.replace(pr,"")),n}},vr={start:qt(1),end:qt(2),trim:qt(3)},hr=wn.f,mr=me.f,gr=J.f,br=vr.trim,Y=_.Number,_t=Y.prototype,yr=F(cr(_t))=="Number",Ye=function(t){var e,n,o,i,a,u,f,d,g=zt(t,!1);if(typeof g=="string"&&g.length>2){if((e=(g=br(g)).charCodeAt(0))===43||e===45){if((n=g.charCodeAt(2))===88||n===120)return NaN}else if(e===48){switch(g.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+g}for(u=(a=g.slice(2)).length,f=0;f<u;f++)if((d=a.charCodeAt(f))<48||d>i)return NaN;return parseInt(a,o)}}return+g};if(fn("Number",!Y(" 0o1")||!Y("0b1")||Y("+0x1"))){for(var gt,V=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof V&&(yr?P(function(){_t.valueOf.call(n)}):F(n)!="Number")?Jo(new Y(Ye(e)),n,V):Ye(e)},Ve=X?hr(Y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Kt=0;Ve.length>Kt;Kt++)A(Y,gt=Ve[Kt])&&!A(V,gt)&&gr(V,gt,mr(Y,gt));V.prototype=_t,_t.constructor=V,pe(_,"Number",V)}var G,Tt,wr={f:Object.getOwnPropertySymbols},xr=he("Reflect","ownKeys")||function(t){var e=wn.f(Z(t)),n=wr.f;return n?e.concat(n(t)):e},_r=function(t,e){for(var n=xr(e),o=J.f,i=me.f,a=0;a<n.length;a++){var u=n[a];A(t,u)||o(t,u,i(e,u))}},Sr=me.f,Nt=function(t,e){var n,o,i,a,u,f=t.target,d=t.global,g=t.stat;if(n=d?_:g?_[f]||fe(f,{}):(_[f]||{}).prototype)for(o in e){if(a=e[o],i=t.noTargetGet?(u=Sr(n,o))&&u.value:n[o],!fn(d?o:f+(g?".":"#")+o,t.forced)&&i!==void 0){if(typeof a==typeof i)continue;_r(a,i)}(t.sham||i&&i.sham)&&q(a,"sham",!0),pe(n,o,a,t)}},kr=function(t,e,n){if(function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function")}(t),e===void 0)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(o){return t.call(e,o)};case 2:return function(o,i){return t.call(e,o,i)};case 3:return function(o,i,a){return t.call(e,o,i,a)}}return function(){return t.apply(e,arguments)}},xn=function(t){return Object(ve(t))},dt=Array.isArray||function(t){return F(t)=="Array"},Mr=F(_.process)=="process",Jt=he("navigator","userAgent")||"",Re=_.process,Xe=Re&&Re.versions,He=Xe&&Xe.v8;He?Tt=(G=He.split("."))[0]+G[1]:Jt&&(!(G=Jt.match(/Edge\/(\d+)/))||G[1]>=74)&&(G=Jt.match(/Chrome\/(\d+)/))&&(Tt=G[1]);var st=Tt&&+Tt,ae=!!Object.getOwnPropertySymbols&&!P(function(){return!Symbol.sham&&(Mr?st===38:st>37&&st<41)}),Cr=ae&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ot=pn("wks"),ct=_.Symbol,Lr=Cr?ct:ct&&ct.withoutSetter||vn,tt=function(t){return A(ot,t)&&(ae||typeof ot[t]=="string")||(ae&&A(ct,t)?ot[t]=ct[t]:ot[t]=Lr("Symbol."+t)),ot[t]},Tr=tt("species"),_n=function(t,e){var n;return dt(t)&&(typeof(n=t.constructor)!="function"||n!==Array&&!dt(n.prototype)?N(n)&&(n=n[Tr])===null&&(n=void 0):n=void 0),new(n===void 0?Array:n)(e===0?0:e)},We=[].push,$=function(t){var e=t==1,n=t==2,o=t==3,i=t==4,a=t==6,u=t==7,f=t==5||a;return function(d,g,l,s){for(var p,b,m=xn(d),C=mn(m),L=kr(g,l,3),S=Dt(C.length),I=0,B=s||_n,j=e?B(d,S):n||u?B(d,0):void 0;S>I;I++)if((f||I in C)&&(b=L(p=C[I],I,m),t))if(e)j[I]=b;else if(b)switch(t){case 3:return!0;case 5:return p;case 6:return I;case 2:We.call(j,p)}else switch(t){case 4:return!1;case 7:We.call(j,p)}return a?-1:o||i?i:j}},ge={forEach:$(0),map:$(1),filter:$(2),some:$(3),every:$(4),find:$(5),findIndex:$(6),filterOut:$(7)},zr=tt("species"),At=function(t){return st>=51||!P(function(){var e=[];return(e.constructor={})[zr]=function(){return{foo:1}},e[t](Boolean).foo!==1})},Er=ge.filter;Nt({target:"Array",proto:!0,forced:!At("filter")},{filter:function(t){return Er(this,t,arguments.length>1?arguments[1]:void 0)}});var Dr=ge.map;Nt({target:"Array",proto:!0,forced:!At("map")},{map:function(t){return Dr(this,t,arguments.length>1?arguments[1]:void 0)}});var ie=function(t,e,n){var o=zt(e);o in t?J.f(t,o,ue(0,n)):t[o]=n},Sn=tt("isConcatSpreadable"),Nr=st>=51||!P(function(){var t=[];return t[Sn]=!1,t.concat()[0]!==t}),Ar=At("concat"),Ir=function(t){if(!N(t))return!1;var e=t[Sn];return e!==void 0?!!e:dt(t)};Nt({target:"Array",proto:!0,forced:!Nr||!Ar},{concat:function(t){var e,n,o,i,a,u=xn(this),f=_n(u,0),d=0;for(e=-1,o=arguments.length;e<o;e++)if(Ir(a=e===-1?u:arguments[e])){if(d+(i=Dt(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,d++)n in a&&ie(f,d,a[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");ie(f,d++,a)}return f.length=d,f}});var Or,Ge,jr=ge.forEach,Qt=!!(Ge=[].forEach)&&P(function(){Ge.call(null,Or||function(){throw 1},1)})?[].forEach:function(t){return jr(this,t,arguments.length>1?arguments[1]:void 0)};for(var Fr in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Ue=_[Fr],bt=Ue&&Ue.prototype;if(bt&&bt.forEach!==Qt)try{q(bt,"forEach",Qt)}catch{bt.forEach=Qt}}var kn={};kn[tt("toStringTag")]="z";var be=String(kn)==="[object z]",Pr=tt("toStringTag"),Br=F(function(){return arguments}())=="Arguments",$r=be?F:function(t){var e,n,o;return t===void 0?"Undefined":t===null?"Null":typeof(n=function(i,a){try{return i[a]}catch{}}(e=Object(t),Pr))=="string"?n:Br?F(e):(o=F(e))=="Object"&&typeof e.callee=="function"?"Arguments":o},Yr=be?{}.toString:function(){return"[object "+$r(this)+"]"};be||pe(Object.prototype,"toString",Yr,{unsafe:!0}),function(){if(typeof window!="undefined"){var t=window,e='<svg><symbol id="icon-rotate-right" viewBox="0 0 1024 1024"><path d="M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z" fill="" ></path></symbol><symbol id="icon-rotate-left" viewBox="0 0 1024 1024"><path d="M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z" fill="" ></path></symbol><symbol id="icon-resize" viewBox="0 0 1024 1024"><path d="M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"  ></path></symbol><symbol id="icon-img-broken" viewBox="0 0 1024 1024"><path d="M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"  ></path></symbol><symbol id="icon-prev" viewBox="0 0 1024 1024"><path d="M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"  ></path></symbol><symbol id="icon-next" viewBox="0 0 1024 1024"><path d="M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"  ></path></symbol><symbol id="icon-zoomin" viewBox="0 0 1024 1024"><path d="M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"  ></path><path d="M235.712 369.92h390.72v127.104H235.712z"  ></path><path d="M367.488 238.144h127.104v390.72H367.488z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"  ></path></symbol><symbol id="icon-zoomout" viewBox="0 0 1024 1024"><path d="M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"  ></path><path d="M235.712 369.92h390.72v127.104H235.712z"  ></path></symbol></svg>';(function(n){document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):document.addEventListener("DOMContentLoaded",function d(){document.removeEventListener("DOMContentLoaded",d,!1),n()},!1):document.attachEvent&&(i=n,a=t.document,u=!1,(f=function(){try{a.documentElement.doScroll("left")}catch{return void setTimeout(f,50)}o()})(),a.onreadystatechange=function(){a.readyState=="complete"&&(a.onreadystatechange=null,o())});function o(){u||(u=!0,i())}var i,a,u,f})(function(){var n,o,i,a,u,f;(n=document.createElement("div")).innerHTML=e,e=null,(o=n.getElementsByTagName("svg")[0])&&(o.setAttribute("aria-hidden","true"),o.style.position="absolute",o.style.width=0,o.style.height=0,o.style.overflow="hidden",i=o,(a=document.body).firstChild?(u=i,(f=a.firstChild).parentNode.insertBefore(u,f)):a.appendChild(i))})}}();var O=K({name:"SvgIcon",props:{type:{type:String,default:""}},setup:function(t){return function(){return v("svg",{class:"".concat("vel","-icon icon"),"aria-hidden":"true"},[v("use",{"xlink:href":"#icon-".concat(t.type)},null)])}}}),Vr=At("slice"),Rr=tt("species"),Xr=[].slice,Hr=Math.max;Nt({target:"Array",proto:!0,forced:!Vr},{slice:function(t,e){var n,o,i,a=Et(this),u=Dt(a.length),f=re(t,u),d=re(e===void 0?u:e,u);if(dt(a)&&(typeof(n=a.constructor)!="function"||n!==Array&&!dt(n.prototype)?N(n)&&(n=n[Rr])===null&&(n=void 0):n=void 0,n===Array||n===void 0))return Xr.call(a,f,d);for(o=new(n===void 0?Array:n)(Hr(d-f,0)),i=0;f<d;f++,i++)f in a&&ie(o,i,a[f]);return o.length=i,o}});var It=typeof window!="undefined",U=function(){},Mn=!1;if(It)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Mn=!0}}),window.addEventListener("test-passive",U,Ze)}catch{}var qe=function(t,e,n){var o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];It&&t.addEventListener(e,n,!!Mn&&{capture:!1,passive:o})},Ke=function(t,e,n){It&&t.removeEventListener(e,n)},Wr=function(t){t.preventDefault()},Gr=Object.prototype.toString,ye=function(t){return function(e){return Gr.call(e).slice(8,-1)===t}};function Je(t){return ye("Array")(t)}var Cn=function(t){return!!t&&ye("String")(t)};function Ur(t){return t!=null}var Zr=K({name:"Toolbar",props:{zoomIn:{type:Function,default:U},zoomOut:{type:Function,default:U},rotateLeft:{type:Function,default:U},rotateRight:{type:Function,default:U},resize:{type:Function,default:U}},setup:function(t){return function(){return v("div",{class:"".concat("vel","-toolbar")},[v("div",{class:"toolbar-btn toolbar-btn__zoomin",onClick:t.zoomIn},[v(O,{type:"zoomin"},null)]),v("div",{class:"toolbar-btn toolbar-btn__zoomout",onClick:t.zoomOut},[v(O,{type:"zoomout"},null)]),v("div",{class:"toolbar-btn toolbar-btn__resize",onClick:t.resize},[v(O,{type:"resize"},null)]),v("div",{class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateLeft},[v(O,{type:"rotate-left"},null)]),v("div",{class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateRight},[v(O,{type:"rotate-right"},null)])])}}}),qr=function(){return v("div",{class:"".concat("vel","-loading")},[v("div",{class:"ring"},null)])},Kr=function(){return v("div",{class:"".concat("vel","-on-error")},[v("div",{class:"ring"},null),v(O,{type:"img-broken"},null)])},Jr=function(t,e){var n=e.slots;return v("div",{class:"".concat("vel","-img-title")},[n.default?n.default():""])},ut=It?window:global,Qe=Date.now();function Qr(t){var e=Date.now(),n=Math.max(0,16-(e-Qe)),o=setTimeout(t,n);return Qe=e+n,o}function te(t){return(ut.requestAnimationFrame||Qr).call(ut,t)}function tn(t){(ut.cancelAnimationFrame||ut.clearTimeout).call(ut,t)}function en(t,e){var n=t.clientX-e.clientX,o=t.clientY-e.clientY;return Math.sqrt(n*n+o*o)}function ee(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Kn(t)}function ta(t){return function(e){return!!e&&ye("Object")(e)}(t)&&Cn(t.src)}var le=K({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:function(){return""}},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1}},emits:["hide","on-error","on-prev","on-next","on-prev-click","on-next-click","on-index-change"],setup:function(t,e){var n=e.emit,o=e.slots,i=function(){var r=at(),c=it({width:0,height:0,maxScale:1});return{imgRef:r,imgState:c,setImgSize:function(){if(r.value){var w=r.value,T=w.width,z=w.height,y=w.naturalWidth;c.maxScale=y/T,c.width=T,c.height=z}}}}(),a=i.imgRef,u=i.imgState,f=i.setImgSize,d=at(0),g=at(""),l=it({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),s=it({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),p=rt(function(){return Je(t.imgs)?t.imgs.map(function(r){return typeof r=="string"?{src:r}:ta(r)?r:void 0}).filter(Ur):Cn(t.imgs)?[{src:t.imgs}]:[]}),b=rt(function(){var r;return(r=p.value[d.value])===null||r===void 0?void 0:r.src}),m=rt(function(){var r;return(r=p.value[d.value])===null||r===void 0?void 0:r.title}),C=rt(function(){return{cursor:s.loadError?"default":t.moveDisabled?s.dragging?"grabbing":"grab":"move",top:"calc(50% + ".concat(l.top,"px)"),left:"calc(50% + ".concat(l.left,"px)"),transition:s.dragging||s.gesturing?"none":"",transform:"translate(-50%, -50%) scale(".concat(l.scale,") rotate(").concat(l.rotateDeg,"deg)")}}),L=function(){n("hide")},S=function(){l.scale=1,l.lastScale=1,l.rotateDeg=0,l.top=0,l.left=0,s.loadError=!1,s.dragging=!1,s.loading=!0},I=function(r,c){var w=d.value;S(),d.value=r,p.value[d.value]===p.value[r]&&Me(function(){s.loading=!1}),t.visible&&w!==r&&(c&&(Je(c)?c.forEach(function(T){n(T,w,r)}):n(c,w,r)),n("on-index-change",w,r))},B=function(){var r=d.value,c=t.loop?(r+1)%p.value.length:r+1;!t.loop&&c>p.value.length-1||I(c,["on-next","on-next-click"])},j=function(){var r=d.value,c=r-1;if(r===0){if(!t.loop)return;c=p.value.length-1}I(c,["on-prev","on-prev-click"])},we=function(r){Math.abs(1-r)<.05?r=1:Math.abs(u.maxScale-r)<.05&&(r=u.maxScale),l.lastScale=l.scale,l.scale=r},vt=function(){var r=l.scale+.12;r<3*u.maxScale&&we(r)},ht=function(){var r=l.scale-(l.scale<.7?.1:.12);r>.1&&we(r)},et=function(){l.rotateDeg-=90},Ot=function(){l.rotateDeg+=90},jt=function(){l.scale=1,l.top=0,l.left=0},Ft=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!t.moveDisabled&&r===0},Pt=function(r,c,w){var T,z=!1;return{onMouseDown:function(y){r.initX=r.lastX=y.clientX,r.initY=r.lastY=y.clientY,c.dragging=!0,z=!1,y.stopPropagation()},onMouseUp:function(y){w(y.button)&&tn(T),c.dragging=!1,z=!1},onMouseMove:function(y){if(c.dragging)if(w(y.button)){if(z)return;z=!0,T=te(function(){var H=r.top,E=r.left,$t=r.lastY,Yt=r.lastX;r.top=H-$t+y.clientY,r.left=E-Yt+y.clientX,r.lastX=y.clientX,r.lastY=y.clientY,z=!1})}else r.lastX=y.clientX,r.lastY=y.clientY;y.stopPropagation()}}}(l,s,Ft),Tn=Pt.onMouseDown,zn=Pt.onMouseMove,En=Pt.onMouseUp,Bt=function(r,c,w,T){var z,y=!1;return{onTouchStart:function(H){var E=H.touches;E.length>1?(w.gesturing=!0,c.touches=E):(c.initX=c.lastX=E[0].clientX,c.initY=c.lastY=E[0].clientY,w.dragging=!0),H.stopPropagation()},onTouchMove:function(H){if(!y){var E=H.touches,$t=c.lastX,Yt=c.lastY,Hn=c.left,Wn=c.top,Gn=c.scale;if(!w.gesturing&&w.dragging){if(!E[0])return;var ke=E[0],Vt=ke.clientX,Rt=ke.clientY;T()?z=te(function(){c.lastX=Vt,c.lastY=Rt,c.top=Wn-Yt+Rt,c.left=Hn-$t+Vt,y=!1}):(c.lastX=Vt,c.lastY=Rt)}else w.gesturing&&c.touches.length>1&&E.length>1&&(z=te(function(){var Un=(en(c.touches[0],c.touches[1])-en(E[0],E[1]))/r.width;c.touches=E;var Xt=Gn-1.3*Un;Xt>.5&&Xt<1.5*r.maxScale&&(c.scale=Xt),y=!1}))}},onTouchEnd:function(){tn(z),w.dragging=!1,w.gesturing=!1,y=!1}}}(u,l,s,Ft),Dn=Bt.onTouchStart,Nn=Bt.onTouchMove,An=Bt.onTouchEnd,In=function(){l.scale!==u.maxScale?(l.lastScale=l.scale,l.scale=u.maxScale):l.scale=l.lastScale},On=function(r){s.loadError||s.gesturing||s.loading||s.dragging||s.wheeling||!t.scrollDisabled||(s.wheeling=!0,setTimeout(function(){s.wheeling=!1},80),r.deltaY<0?vt():ht())},xe=function(r){var c=r;t.visible&&(!t.escDisabled&&c.key==="Escape"&&t.visible&&L(),c.key==="ArrowLeft"&&(t.rtl?B():j()),c.key==="ArrowRight"&&(t.rtl?j():B()))},jn=function(){f()},Fn=function(){s.loading=!1},Pn=function(r){s.loading=!1,s.loadError=!0,n("on-error",r)},_e=function(){t.visible&&f()};yt(function(){return t.index},function(r){r<0||r>=p.value.length||I(r)}),yt(function(){return s.dragging},function(r,c){var w=!r&&c;if(!Ft()&&w){var T=l.lastX-l.initX,z=l.lastY-l.initY,y=t.swipeTolerance;Math.abs(T)>Math.abs(z)&&(T<-1*y?B():T>y&&j())}}),yt(function(){return t.visible},function(r){if(r){S();var c=p.value.length;if(c===0)return d.value=0,s.loading=!1,void Me(function(){return s.loadError=!0});d.value=t.index>=c?c-1:t.index<0?0:t.index,t.scrollDisabled&&Bn()}else t.scrollDisabled&&$n()});var Bn=function(){document&&(g.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},$n=function(){document&&(document.body.style.overflowY=g.value)};nn(function(){qe(document,"keydown",xe),qe(window,"resize",_e)}),Zn(function(){Ke(document,"keydown",xe),Ke(window,"resize",_e)});var Yn=function(){return s.loading?o.loading?o.loading({key:"loading"}):v(qr,{key:"img-loading"},null):s.loadError?o.onerror?o.onerror({key:"onerror"}):v(Kr,{key:"img-on-error"},null):v("div",{class:"".concat("vel","-img-wrapper"),style:C.value,key:"img-wrapper"},[v("img",{ref:a,draggable:"false",class:"".concat("vel","-img"),src:b.value,onMousedown:Tn,onMouseup:En,onMousemove:zn,onTouchstart:Dn,onTouchmove:Nn,onTouchend:An,onLoad:jn,onDblclick:In,onDragstart:function(r){r.preventDefault()}},null)])},Vn=function(){if(o["prev-btn"])return o["prev-btn"]({prev:j});if(!(p.value.length<=1)){var r=!t.loop&&d.value<=0;return v("div",{class:"btn__prev ".concat(r?"disable":""),onClick:j},[t.rtl?v(O,{type:"next"},null):v(O,{type:"prev"},null)])}},Rn=function(){if(o["next-btn"])return o["next-btn"]({next:B});if(!(p.value.length<=1)){var r=!t.loop&&d.value>=p.value.length-1;return v("div",{class:"btn__next ".concat(r?"disable":""),onClick:B},[t.rtl?v(O,{type:"prev"},null):v(O,{type:"next"},null)])}},Xn=function(){if(m.value&&!t.titleDisabled&&!s.loading&&!s.loadError)return o.title?o.title():v(Jr,null,{default:function(){return[m.value]}})},Se=function(){var r;if(t.visible)return v("div",{onTouchmove:Wr,class:["".concat("vel","-modal"),t.rtl?"is-rtl":""],onClick:Jn(L,["self"]),onWheel:On},[v(Ht,{name:"".concat("vel","-fade"),mode:"out-in"},ee(r=Yn())?r:{default:function(){return[r]}}),v("img",{style:"display:none;",src:b.value,onError:Pn,onLoad:Fn},null),v("div",{class:"".concat("vel","-btns-wrapper")},[Vn(),Rn(),Xn(),o["close-btn"]?o["close-btn"]({close:L}):v("div",{class:"btn__close",onClick:L},[v(O,{type:"close"},null)]),o.toolbar?o.toolbar({toolbarMethods:{zoomIn:vt,zoomOut:ht,rotate:et,rotateLeft:et,rotateRight:Ot,resize:jt},zoomIn:vt,zoomOut:ht,rotate:et,rotateLeft:et,rotateRight:Ot,resize:jt}):v(Zr,{zoomIn:vt,zoomOut:ht,resize:jt,rotateLeft:et,rotateRight:Ot},null)])])};return function(){var r,c;return t.teleport?v(qn,{to:t.teleport},{default:function(){return[v(Ht,{name:"".concat("vel","-fade")},ee(c=Se())?c:{default:function(){return[c]}})]}}):v(Ht,{name:"".concat("vel","-fade")},ee(r=Se())?r:{default:function(){return[r]}})}}}),Ln=le;Ln.install=function(t){t.component(le.name,le)};const ea={class:"flex items-center rounded-t-lg border-b-[1px] border-gray-500 px-2 py-4 duration-150 hover:bg-gray-300"},na={class:"flex-1"},oa={class:"flex items-center justify-between"},ra={class:"flex-c"},aa={class:"text-lg font-bold"},ia={class:"flex items-center justify-between"},la={class:"text-gray-600"},sa={key:0,class:"ml-1 whitespace-nowrap rounded-md bg-blue p-1 text-white"},ca={key:1,class:"ml-1 whitespace-nowrap rounded-md bg-dark-green p-1 text-white"},ua={class:"text-gray-600"},fa=K({__name:"NearbyDetail",props:{data:null},setup(t){const e=ce(),n=ao(),{t:o}=on(),{lang:i}=ft(e),{likeStops:a}=ft(n);function u(l,s){if(l===-1)return s?f(s):o("noDeparture");if(l<30)return o("arriving");if(l<60)return o("upcoming");{const p=(l/60).toFixed(0);return o("minute",{num:p})}}function f(l){const s=new Date(l),p=s.getHours(),b=s.getMinutes();return`${p<10?"0"+p:p}:${b<10?"0"+b:b}`}function d(l){return l===-1||!l?"bg-gray-500":l<60?"bg-secondary":"bg-primary"}const g=at(!1);return(l,s)=>{var p,b;return M(),D(wt,null,[h("div",ea,[h("div",{class:rn([d(t.data.EstimateTime),"mr-4 w-[4rem] rounded-lg py-1 text-center text-white"])},k(u(t.data.EstimateTime,t.data.NextBusTime)),3),h("div",na,[h("div",oa,[h("div",ra,[h("span",aa,k(x(i)==="zh-TW"?t.data.RouteName.Zh_tw:(p=t.data.RouteName.En)!=null?p:t.data.RouteName.Zh_tw),1),v(No,{class:"mx-1 h-5 w-5 cursor-pointer",onClick:s[0]||(s[0]=m=>g.value=!0)})]),h("div",{class:"cursor-pointer",onClick:s[1]||(s[1]=m=>x(n).toggleLikeStops(t.data))},[x(a).findIndex(m=>m.RouteUID===t.data.RouteUID)>=0?(M(),St(io,{key:0,class:"h-5 w-5 text-secondary"})):(M(),St(lo,{key:1,class:"h-5 w-5"}))])]),h("div",ia,[h("div",la,[an(k(x(o)("goTo"))+" "+k(x(i)==="zh-TW"?t.data.DestinationStopNameZh:(b=t.data.DestinationStopNameEn)!=null?b:t.data.DestinationStopNameZh)+" ",1),t.data.PlateNumb?(M(),D("span",sa,k(t.data.PlateNumb),1)):Ce("",!0),t.data.IsLastBus?(M(),D("span",ca,k(x(o)("lastBus")),1)):Ce("",!0)]),h("div",ua,k(x(o)(`city.${t.data.City}`)),1)])])]),v(x(Ln),{"scroll-disabled":"","esc-disabled":"","move-disabled":"",visible:g.value,imgs:t.data.RouteMapImageUrl,onHide:s[2]||(s[2]=m=>g.value=!1)},null,8,["visible","imgs"])],64)}}}),da={key:0,class:"flex-c h-full text-gray-400"},pa={key:1,class:"flex h-full w-full flex-col"},va={class:"flex-c h-[4rem] flex-grow bg-white px-4"},ha={class:"relative w-full rounded-lg bg-gray-300"},ma=["placeholder"],ga={class:"h-[calc(100%-4rem)] overflow-y-scroll bg-white px-4 pb-4"},ba={key:1,class:"h-full bg-white"},ya={class:"flex h-[2rem] items-center justify-between px-2"},wa={class:"ml-1"},xa={class:"flex-c h-[6rem] px-4 text-2xl font-bold"},_a={class:"flex h-[calc(100%-11rem)] flex-col overflow-y-auto px-4"},Sa={class:"relative mx-4 flex h-[3rem] items-center justify-between"},ka={class:"absolute top-0 h-[2px] w-full bg-gray-300"},Ma={class:"flex-c mt-[1px]"},Ca=["checked"],La={class:"ml-1"},Ta={class:"ml-1"},Aa=K({__name:"NearbyBoard",setup(t){const{t:e}=on(),n=Qn(),o=ln(),i=ce(),{userPosition:a,nearbyStation:u}=ft(o),{lang:f}=ft(i),d=at(""),g=rt(()=>u.value?u.value.filter(p=>{if(p.StationName.Zh_tw.indexOf(d.value)>=0||p.StationName.En&&p.StationName.En.indexOf(d.value)>=0)return p}):[]),l=it({isShow:!1,name:"",nameEn:"",data:[],async show(p,b,m,C){const L=await Wt.getNearbyStationWithArrival(p,b);L?(s.currentID=p,s.currenCity=b,this.name=m,this.nameEn=C,this.data=L,this.isShow=!0):n.error("\u7121\u6CD5\u53D6\u5F97\u8CC7\u6599\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66")},closeShow(){s.intervalContainer&&clearInterval(s.intervalContainer),this.isShow=!1}}),s=it({currentID:"",currenCity:"",timer:30,intervalContainer:void 0,autoMode:!1,toggleAutoMode(){this.autoMode=!this.autoMode,this.autoMode?this.intervalContainer=setInterval(()=>{this.timer-=1,this.timer<0&&(this.timer=30,this.updateData())},1e3):(clearInterval(this.intervalContainer),this.timer=30)},async updateData(){if(!this.currentID||!this.currenCity)return;const p=await Wt.getNearbyStationWithArrival(this.currentID,this.currenCity);p&&(l.data=p)}});return nn(()=>{if(!navigator.geolocation)return n.error("\u60A8\u7684\u700F\u89BD\u5668\u672A\u652F\u63F4\u5B9A\u4F4D\u529F\u80FD");function p(m){const C=m.coords.latitude,L=m.coords.longitude;o.changeUserPosition(C,L)}function b(){o.updateNearByStation([]),n.error("\u7121\u6CD5\u53D6\u5F97\u60A8\u7684\u5B9A\u4F4D\u8CC7\u8A0A")}navigator.geolocation.getCurrentPosition(p,b)}),yt(a,async p=>{if(p){const b=await Wt.getNearbyStation(p[0],p[1]);b&&o.updateNearByStation(b)}}),(p,b)=>x(u)?(M(),D("section",pa,[l.isShow?(M(),D("section",ba,[h("div",ya,[h("button",{type:"button",class:"flex-c",onClick:b[1]||(b[1]=(...m)=>l.closeShow&&l.closeShow(...m))},[v(oo),h("span",wa,k(x(e)("back")),1)])]),h("h3",xa,k(x(f)==="zh-TW"?l.name:l.nameEn),1),h("div",_a,[(M(!0),D(wt,null,Te(l.data,(m,C)=>(M(),St(fa,{key:C,data:m},null,8,["data"]))),128))]),h("div",Sa,[h("div",ka,[h("div",{class:rn(["absolute left-0 h-[2px] bg-primary",{"process-line":s.autoMode}])},null,2)]),h("div",Ma,[h("input",{type:"checkbox",checked:s.autoMode,onChange:b[2]||(b[2]=(...m)=>s.toggleAutoMode&&s.toggleAutoMode(...m))},null,40,Ca),h("span",La,k(x(e)("refreshAuto")),1),Le(h("span",null,"\uFF08"+k(x(e)("afterTime"))+" "+k(s.timer)+" "+k(x(e)("second"))+"\uFF09",513),[[eo,s.autoMode]])]),h("div",{class:"flex-c cursor-pointer",onClick:b[3]||(b[3]=(...m)=>s.updateData&&s.updateData(...m))},[v(ro),h("span",Ta,k(x(e)("refreshNow")),1)])])])):(M(),D(wt,{key:0},[h("div",va,[h("div",ha,[Le(h("input",{"onUpdate:modelValue":b[0]||(b[0]=m=>d.value=m),type:"search",placeholder:x(e)("typeKeyword"),class:"peer w-full border-0 bg-transparent focus:ring-0"},null,8,ma),[[to,d.value]]),v(no,{class:"absolute right-3 top-[50%] h-4 w-4 -translate-y-[50%] peer-hover:hidden peer-focus:hidden"})])]),h("div",ga,[(M(!0),D(wt,null,Te(x(g),(m,C)=>(M(),St(Co,{key:C,data:m,index:C,onDisplayDetail:L=>{var S;return l.show(m.StationID,m.City,m.StationName.Zh_tw,(S=m.StationName.En)!=null?S:m.StationName.Zh_tw)}},null,8,["data","index","onDisplayDetail"]))),128))])],64))])):(M(),D("section",da,[v(vo,{class:"mr-2 h-6 w-6 animate-spin"}),an(" "+k(x(f)==="zh-TW"?"\u6B63\u5728\u53D6\u5F97\u60A8\u7684\u4F4D\u7F6E\u8CC7\u8A0A...":"Getting your location..."),1)]))}});export{Aa as default};
